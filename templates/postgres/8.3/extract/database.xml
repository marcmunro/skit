<?xml version="1.0" encoding="UTF-8"?>

<skit:inclusion
   xmlns:skit="http://www.bloodnok.com/xml/skit"
   xmlns:xi="http://www.w3.org/2003/XInclude">
   <database>	
     <skit:attr name="name"/>
     <skit:attr name="owner"/>
     <skit:attr name="encoding"/>
     <skit:attr name="tablespace"/>
     <skit:attr name="connections"/>
     <skit:if test="(select dbinfo 'comment')">
       <comment>
	 <skit:text expr="(select dbinfo 'comment')"/>
       </comment>
     </skit:if>
     <skit:let>
       <skit:if test="(not (select dbinfo 'privs'))">
	 <grant with_grant="no" priv="temporary" to="public">
	   <skit:attr name="from" expr="(select tuple 'owner')"/>
	 </grant>
	 <grant with_grant="no" priv="connect" to="public">
	   <skit:attr name="from" field="owner"/>
	 </grant>
	 <!-- <skit:exception text="EXCEPTION TEST IN database.xml"/> -->

       </skit:if>
       <skit:exec_function name="grants_from_privs"
			   privileges="(select dbinfo 'privs')"/>
     </skit:let>	

     <skit:let>
       <skit:runsql to="alltypes" file="sql/alltypes.sql" hash="oid"/>
       <skit:runsql to="basetypes" file="sql/basetypes.sql" hash="oid"/>
       <skit:runsql to="comptypes" file="sql/comptypes.sql"/>
       <skit:runsql to="domains" file="sql/domains.sql"/>
       <skit:runsql to="enums" file="sql/enums.sql"/>
       <skit:runsql to="constraints" file="sql/constraints.sql"/>
       <skit:runsql to="functions" file="sql/functions.sql" hash="oid"/>
       <skit:runsql to="operators" file="sql/operators.sql" hash="oid"/>
       <skit:runsql to="operator_families"
		    file="sql/operator_families.sql" hash="oid"/>
       <skit:runsql to="operator_classes"
		    file="sql/operator_classes.sql" hash="oid"/>
       <skit:runsql to="opclass_opers" file="sql/opclass_opers.sql"/>
       <skit:runsql to="opclass_funcs" file="sql/opclass_funcs.sql"/>
       <skit:runsql to="aggregates" file="sql/aggregates.sql"/>
       <skit:runsql to="sequences" file="sql/sequences.sql"/>
       <skit:runsql to="tables" file="sql/tables.sql"/>

       <xi:include href="skitfile:extract/function_sigs.xml"/>
       <xi:include href="skitfile:extract/languages.xml"/>
       <xi:include href="skitfile:extract/casts.xml"/>
       <xi:include href="skitfile:extract/schema.xml"/>
     </skit:let>
   </database>
</skit:inclusion>  


<!-- Keep this comment at the end of the file
Local variables:
mode: xml
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:nil
sgml-general-insert-case:lower
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
