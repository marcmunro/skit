<?xml version="1.0" encoding="UTF-8"?>

<skit:inclusion
   xmlns:skit="http://www.bloodnok.com/xml/skit"
   xmlns:xi="http://www.w3.org/2003/XInclude">

  <skit:foreach var="basetype" from="basetypes" 
		filter="(string= (select basetype 'schema')
			         (select schema 'name'))">
    <skit:if test="(string= (select tuple 'is_defined') 't')">
      <type>
        <skit:attr name="name"/>
        <skit:attr name="schema"/>
        <skit:attr name="owner"/>
        <skit:attr name="subtype" expr="'basetype'"/>
        <skit:attr name="delimiter"/>
        <skit:attr name="typelen"/>
        <skit:attr name="alignment"/>
        <skit:attr name="default"/>
        <skit:attr name="storage"/>
        <skit:attr name="element"/>
        <skit:attr name="passbyval" 
      		 expr="(and (select tuple 'passbyval') 'yes')"/>
        <!-- TODO: element, typmod_in, typmod_out attributes? -->
        <skit:exec_function name="type_handler"
      			  oid="(select tuple 'input_oid')"
      			  type="'input'"/>
        <skit:exec_function name="type_handler"
      			  oid="(select tuple 'output_oid')"
      			  type="'output'"/>
        <skit:exec_function name="type_handler"
      			  oid="(select tuple 'send_oid')"
      			  type="'send'"/>
        <skit:exec_function name="type_handler"
      			  oid="(select tuple 'receive_oid')"
      			  type="'receive'"/>
        <skit:exec_function name="type_handler"
      			  oid="(select tuple 'analyze_oid')"
      			  type="'analyze'"/>

        <skit:if test="(select tuple 'comment')">
      	  <comment>
      	    <skit:text expr="(select tuple 'comment')"/>
      	  </comment>
        </skit:if>
      </type>
    </skit:if>
  </skit:foreach>
</skit:inclusion>  


<!-- Keep this comment at the end of the file
Local variables:
mode: xml
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:nil
sgml-general-insert-case:lower
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
