<?xml version="1.0" encoding="UTF-8"?>

<skit:stylesheet
   xmlns:skit="http://www.bloodnok.com/xml/skit"
   xmlns:xi="http://www.w3.org/2003/XInclude">

  <skit:options>
    <option name='sources' type='integer' value='0'/>
    <option name='c*onnect' type='string'/>
    <option name='dbt*ype' type='string' default='postgres'/>
    <option name='d*atabase' type='string'/>
    <option name='h*ost' type='string'/>
    <option name='p*ort' type='string'/>
    <option name='u*sername' type='string'/>
    <option name='pass*word' type='string'/>
  </skit:options>

  <!-- <skit:exec expr="(setq dbtype (param 'dbtype'))"/>
  <skit:exec expr="(debug 'Templates' template-paths))"/>
  <skit:exec expr="(debug 'PARAMS' params))"/> -->
  <skit:runsql file="version.sql">
    <dump>
      <skit:attr name="dbtype" expr="dbtype"/>
      <skit:attr name="dbname" expr="dbname"/>
      <skit:attr name="user" expr="username"/> 
      <skit:attr name="time" expr="(current-timestamp)"/>
      <skit:exec expr="(setq dbver (version '7.1.4'))"/>
      <skit:exec expr="(setq dbver (version (select tuple 'version')))"/>
      <!--
      <skit:exec expr="(debug 'TUPLE' tuple)"/>
      <skit:exec expr="(debug 'DBVERSION' dbver)"/> -->

      <xi:include href="skitfile:extract/cluster.xml"/>

<!--      <skit:exec expr="(setq dbver (version '7.1.4'))"/>
      <skit:exec expr="(setq dbver (version '7.1.4'))"/>
      <skit:exec expr="(setq dbver (version (get tuple 'version')))"/>
      <skit:exec expr="(debug 'VERSION' (get tuple 'version')))"/>
      <skit:exec expr="(debug 'DBVERSION' dbver)"/> -->

      <!--
	  <skit:xslproc stylesheet="post_extract.xsl">
	    <skit:include file="extract/cluster.xml"/>
	  </skit:xslproc>
	  -->
    </dump>	
  </skit:runsql>
  <!-- Original code follows:

  <skit:assign var="results">
    <skit:xslproc stylesheet="post_extract.xsl">
      <skit:include file="extract/cluster.xml"/>
    </skit:xslproc>
  </skit:assign>

  <skit:assign var="with_deps">
    <skit:xslproc stylesheet="add_deps.xsl" 
      input="var" invar="results"/>
  </skit:assign>

  <! - - <skituls:result var="results"/> - - >
  <skit:result var="with_deps"/>
  -->
</skit:stylesheet>

<!-- Keep this comment at the end of the file
Local variables:
mode: xml
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:nil
sgml-general-insert-case:lower
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
